// Campus Placement Data for Himanshu B A (1DS23IS407)
const placementData = [
    { id: 1, company: "VECROS Technologies", role: "Multiple Interns", ctc: "15k + 5k stipend, 4 LPA post", lastDate: "July 7, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 2, company: "DeltaX", role: "Associate Product Engineer", ctc: "7 LPA", lastDate: "July 7, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 3, company: "Paxcom India", role: "Intern + FTE", ctc: "20k stipend, 4-5 LPA", lastDate: "July 8, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 4, company: "Future AGI", role: "Business Intern", ctc: "25k stipend, 5 LPA", lastDate: "July 9, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 5, company: "Cognite", role: "Developer/Data Engineer", ctc: "60k stipend, 14 LPA", lastDate: "July 9, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 6, company: "New Relic", role: "Software Engineer", ctc: "Not specified", lastDate: "July 10, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 7, company: "Booking Holdings", role: "Software Engineer", ctc: "Not specified", lastDate: "July 10, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 8, company: "Automation Anywhere", role: "Software Engineering Intern", ctc: "40k stipend, 12 LPA", lastDate: "July 15, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 9, company: "Esko", role: "Software Engineer Trainee", ctc: "25k stipend, 7.5 LPA", lastDate: "July 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 10, company: "In Time Tec", role: "Junior Software Engineer", ctc: "15k stipend, 5.5 LPA", lastDate: "July 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 11, company: "42Gears Mobility", role: "Software Engineer", ctc: "Not specified", lastDate: "July 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 12, company: "ZETA", role: "Software Engineer", ctc: "Not specified", lastDate: "July 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 13, company: "Telaverge Communications", role: "Software Engineer - R&D", ctc: "20k stipend, 7 LPA", lastDate: "July 17, 2025", status: "rejected", notes: "Shortlisted but rejected in 1st round" },
    { id: 14, company: "Quadrant Systems", role: "Software Developer", ctc: "6 LPA", lastDate: "July 17, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 15, company: "Baker Tilly", role: "Technology Consultant", ctc: "Not specified", lastDate: "July 18, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 16, company: "Thomson Reuters", role: "Software Engineer", ctc: "Not specified", lastDate: "July 18, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 17, company: "Champions Group", role: "RPA & AI Integration Intern", ctc: "20k stipend", lastDate: "July 20, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 18, company: "ConglomerateIT", role: "Data Science & AI Intern", ctc: "25k stipend, 8 LPA", lastDate: "July 24, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 19, company: "Eatclub Brands (BOX8)", role: "Software Engineer", ctc: "Not specified", lastDate: "July 24, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 20, company: "PELATRO", role: "Software Engineer", ctc: "Not specified", lastDate: "July 24, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 21, company: "rtCamp", role: "Associate Software Engineer", ctc: "25k stipend, 9-12 LPA", lastDate: "July 26, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 22, company: "Nerdee (On Grid)", role: "Backend/Frontend/Product Intern", ctc: "10k-20k stipend, 5-7 LPA", lastDate: "July 29, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 23, company: "HCL", role: "Software Engineer", ctc: "4.25 LPA", lastDate: "July 30, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 24, company: "Lumen Technologies", role: "Technology Intern", ctc: "30k stipend, 7 LPA", lastDate: "July 31, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 25, company: "Eurofins", role: "Associate Software Engineer", ctc: "8 LPA + 75k bonus", lastDate: "Aug 5, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 26, company: "AXA Global Business Services", role: "Multiple Tech Roles", ctc: "35k stipend, 6-10 LPA", lastDate: "Aug 7, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 27, company: "DeltaX (2nd Drive)", role: "Product/Business Analyst", ctc: "10 LPA over 2 years", lastDate: "Aug 8, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 28, company: "FinSynth AI", role: "ML/Software/Full Stack Intern", ctc: "35k stipend, up to 10 LPA", lastDate: "Aug 8, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 29, company: "Aparoksha Financial", role: "Backend Developer (Python)", ctc: "15-20k stipend, 7.2-12 LPA", lastDate: "Aug 9, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 30, company: "OpenText", role: "Intern", ctc: "25k stipend, 6-10 LPA", lastDate: "Aug 13, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 31, company: "ASM Technologies", role: "Software Engineer", ctc: "40k stipend, up to 12 LPA", lastDate: "Aug 14, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 32, company: "PeopleHum", role: "Dev Intern", ctc: "28k stipend, 8-10 LPA", lastDate: "Aug 17, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 33, company: "PHINIA DELPHI", role: "Jr Software Engineer", ctc: "20k stipend, 9 LPA", lastDate: "Aug 22, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 34, company: "Siemens Healthineers", role: "Software Engineer", ctc: "7.5 LPA + 1L bonus", lastDate: "Aug 28, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 35, company: "Publicis Sapient", role: "Trainee System Engineer", ctc: "4.58 LPA", lastDate: "Aug 27, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 36, company: "SanDisk", role: "Multiple Interns", ctc: "50k stipend, 15-17 LPA", lastDate: "Aug 29, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 37, company: "IBM", role: "Software Engineer", ctc: "4.5 LPA", lastDate: "Aug 30, 2025", status: "rejected", notes: "Shortlisted but rejected in 1st round" },
    { id: 38, company: "HashedIn by Deloitte", role: "Software Engineer", ctc: "Not specified", lastDate: "Aug 30, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 39, company: "Clarivate", role: "Software Engineer", ctc: "Not specified", lastDate: "Aug 30, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 40, company: "MediBuddy", role: "Software Engineer Intern", ctc: "45k stipend", lastDate: "Sep 9, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 41, company: "HPE", role: "Technical Solution Consultant", ctc: "Not specified", lastDate: "Sep 9, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 42, company: "Fractal Analytics", role: "Imaginer", ctc: "6 LPA (22L over 3 years)", lastDate: "Sep 11, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 43, company: "Havells India", role: "Multiple Engineering Roles", ctc: "Not specified", lastDate: "Sep 12, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 44, company: "Infosys", role: "Multiple Roles", ctc: "3.6-9.5 LPA", lastDate: "Sep 15, 2025", status: "rejected", notes: "Shortlisted but rejected in 1st round" },
    { id: 45, company: "Yethi Consulting", role: "AI/ML Intern", ctc: "25k stipend, 4 LPA", lastDate: "Sep 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 46, company: "Tescra Software", role: "Software Engineer", ctc: "4 LPA + 1L variable", lastDate: "Sep 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 47, company: "UiPath", role: "Product Support Intern", ctc: "50k stipend", lastDate: "Sep 17, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 48, company: "GeeksforGeeks", role: "Course Consultant Intern", ctc: "25k stipend, 5 LPA", lastDate: "Sep 17, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 49, company: "HyperVerge", role: "Software Developer Intern", ctc: "35k stipend, 12-16 LPA", lastDate: "Sep 25, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 50, company: "Textron", role: "Intern", ctc: "25k stipend", lastDate: "Sep 25, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 51, company: "Ninestars IT", role: "Intern", ctc: "35-45k stipend", lastDate: "Sep 26, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 52, company: "NxtWave Edge", role: "Software Engineer", ctc: "8-32 LPA pool", lastDate: "Sep 26, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 53, company: "Black Duck Software", role: "Intern", ctc: "40k stipend, 10 LPA", lastDate: "Sep 27, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 54, company: "Think41", role: "Full Stack Engineer", ctc: "25k stipend, 5.5-7 LPA", lastDate: "Sep 29, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 55, company: "FWC IT Services", role: "AI/ML with Fullstack", ctc: "25k stipend, 8-10 LPA", lastDate: "Sep 27, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 56, company: "Nasdaq", role: "Software Engineer Intern", ctc: "50k stipend, 10 LPA", lastDate: "Sep 28, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 57, company: "Techouts Solutions", role: "Software Developer Intern", ctc: "15k stipend, 3.5-4 LPA", lastDate: "Sep 28, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 58, company: "Kuttukaran Group", role: "Leadership Trainee", ctc: "4.14 LPA", lastDate: "Sep 28, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 59, company: "Marathwada Auto Compo", role: "Management Trainee", ctc: "20k monthly", lastDate: "Sep 28, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 60, company: "Bosch Limited", role: "Software Engineer", ctc: "Not specified", lastDate: "Oct 2, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 61, company: "Lidana.ai", role: "Software Engineer", ctc: "Not specified", lastDate: "Oct 2, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 62, company: "Emplay Inc", role: "Software Engineer", ctc: "Not specified", lastDate: "Oct 2, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 63, company: "Morphle Labs", role: "Software Engineer", ctc: "Not specified", lastDate: "Oct 2, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 64, company: "Stellantis", role: "Graduate Engineer Trainee", ctc: "20k stipend", lastDate: "Oct 10, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 65, company: "Automation Anywhere (2nd)", role: "Cloud Ops Intern", ctc: "40k stipend, 12 LPA", lastDate: "Oct 10, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 66, company: "Wipfli India", role: "Engineer Intern", ctc: "25k stipend, 5.5-7.75 LPA", lastDate: "Oct 10, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 67, company: "Relanto.ai", role: "Technical Trainee", ctc: "42k stipend, 7.5 LPA", lastDate: "Oct 11, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 68, company: "Broadridge", role: "SDET/GCIS", ctc: "25k stipend, 6 LPA + 75k", lastDate: "Oct 11, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 69, company: "Unisys", role: "Students Technical Intern", ctc: "30k stipend, 5-6.5 LPA", lastDate: "Oct 12, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 70, company: "Idea Infinity IT", role: "Associate Software Engineer", ctc: "5 LPA", lastDate: "Oct 14, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 71, company: "SuperAGI", role: "SDE Intern", ctc: "20-25k stipend, 5-7 LPA", lastDate: "Oct 14, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 72, company: "SymphonyAI", role: "Intern", ctc: "25k stipend, 4.5-5 LPA", lastDate: "Oct 14, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 73, company: "Piramal Finance", role: "GET Technology - QA", ctc: "25k stipend, 6 LPA", lastDate: "Oct 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" },
    { id: 74, company: "Wipfli India (2nd Reg)", role: "Infra Tech Engineer", ctc: "25k stipend, 5.5-6.5 LPA", lastDate: "Oct 16, 2025", status: "not-selected", notes: "Not shortlisted for first round" }
];

// Calculate statistics
function calculateStats() {
    const total = placementData.length;
    const selected = placementData.filter(item => item.status === "selected").length;
    const rejected = placementData.filter(item => item.status === "rejected").length;
    const notSelected = placementData.filter(item => item.status === "not-selected").length;
    const inProgress = placementData.filter(item => item.status === "in-progress").length;

    document.getElementById("totalApplications").textContent = total;
    document.getElementById("selectedCount").textContent = selected;
    document.getElementById("rejectedCount").textContent = rejected;
    document.getElementById("notSelectedCount").textContent = notSelected;
    document.getElementById("pendingCount").textContent = inProgress;
}

// Populate table
function populateTable(data = placementData) {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    data.forEach((item, index) => {
        const row = document.createElement("tr");
        row.className = `status-${item.status}`;
        
        row.innerHTML = `
            <td>${index + 1}</td>
            <td><strong>${item.company}</strong></td>
            <td>${item.role}</td>
            <td>${item.ctc}</td>
            <td><small>${item.lastDate}</small></td>
            <td><span class="status-badge ${item.status}">${formatStatus(item.status)}</span></td>
            <td>${item.notes}</td>
        `;
        
        tbody.appendChild(row);
    });
}

// Format status for display
function formatStatus(status) {
    const statusMap = {
        "selected": "✅ Selected",
        "rejected": "❌ Rejected",
        "not-selected": "⚠️ Not Shortlisted",
        "in-progress": "⏳ In Progress"
    };
    return statusMap[status] || status;
}

// Create Pie Chart
function createPieChart() {
    const ctx = document.getElementById('pieChart').getContext('2d');
    
    const selected = placementData.filter(item => item.status === "selected").length;
    const rejected = placementData.filter(item => item.status === "rejected").length;
    const notSelected = placementData.filter(item => item.status === "not-selected").length;
    const inProgress = placementData.filter(item => item.status === "in-progress").length;

    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Selected', 'Rejected (1st Round)', 'Not Shortlisted', 'In Progress'],
            datasets: [{
                data: [selected, rejected, notSelected, inProgress],
                backgroundColor: [
                    '#10b981',
                    '#ef4444',
                    '#f59e0b',
                    '#3b82f6'
                ],
                borderWidth: 2,
                borderColor: '#fff'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 12
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.label || '';
                            const value = context.parsed || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = ((value / total) * 100).toFixed(1);
                            return `${label}: ${value} (${percentage}%)`;
                        }
                    }
                }
            }
        }
    });
}

// Create Bar Chart
function createBarChart() {
    const ctx = document.getElementById('outcomeChart').getContext('2d');
    const totalApplied = 74;
    const notShortlisted = 71;
    const rejectedInInterview = 3;
    const selected = 0;

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [
                'Not Shortlisted',
                'Rejected in 1st Round',
                'Selected'
            ],
            datasets: [{
                label: 'Number of Companies',
                data: [notShortlisted, rejectedInInterview, selected],
                backgroundColor: [
                    '#f59e0b',
                    '#ef4444',
                    '#10b981'
                ],
                borderWidth: 2,
                borderColor: '#fff'
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: true,
            scales: {
                x: {
                    beginAtZero: true,
                    max: totalApplied,
                    title: {
                        display: true,
                        text: 'Number of Companies'
                    },
                    ticks: {
                        stepSize: 10
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Outcome'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const value = context.parsed.x;
                            const percentage = ((value / totalApplied) * 100).toFixed(1);
                            return `${value} companies (${percentage}%)`;
                        },
                        afterLabel: function(context) {
                            if (context.dataIndex === 0) {
                                return 'Never got past resume screening';
                            } else if (context.dataIndex === 1) {
                                return 'IBM, Infosys, Telaverge - All rejected in 1st round';
                            } else {
                                return 'No offers yet - Keep trying!';
                            }
                        }
                    }
                }
            }
        }
    });
}

// Filter functionality
document.getElementById("statusFilter").addEventListener("change", function() {
    const filterValue = this.value;
    const searchValue = document.getElementById("searchBox").value.toLowerCase();
    
    let filteredData = placementData;
    
    if (filterValue !== "all") {
        filteredData = filteredData.filter(item => item.status === filterValue);
    }
    
    if (searchValue) {
        filteredData = filteredData.filter(item => 
            item.company.toLowerCase().includes(searchValue)
        );
    }
    
    populateTable(filteredData);
});

document.getElementById("searchBox").addEventListener("input", function() {
    const searchValue = this.value.toLowerCase();
    const filterValue = document.getElementById("statusFilter").value;
    
    let filteredData = placementData;
    
    if (filterValue !== "all") {
        filteredData = filteredData.filter(item => item.status === filterValue);
    }
    
    if (searchValue) {
        filteredData = filteredData.filter(item => 
            item.company.toLowerCase().includes(searchValue)
        );
    }
    
    populateTable(filteredData);
});

// Initialize on page load
document.addEventListener("DOMContentLoaded", function() {
    calculateStats();
    populateTable();
    createPieChart();
    createBarChart();
});
